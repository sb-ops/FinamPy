# FinamPy
Библиотека-обертка, которая позволяет работать со [старым](https://finamweb.github.io/trade-api-docs) и [новым](https://tradeapi.finam.ru) Finam Trade API брокера [Финам](https://www.finam.ru/) из Python.

### Назначение
 - Создание автоматических торговых систем любой сложности
 - Написание дополнений к системам Технического Анализа
 - Тестирование торговых систем и автоматическая торговля в [BackTrader](https://www.backtrader.com/) через коннектор [BackTraderFinam](https://github.com/cia76/BackTraderFinam).

### Установка
1. Установите все требуемые библиотеки через **pip install -r requirements.txt**
2. Для работы с библиотекой потребуется торговый токен. Инструкцию по его получению для реальных счетов смотрите в файле **Config.py**

### Начало работы
В апреле 2025 года Финам анонсировал новый API, который не совместим со старым. Все старые библиотеки оставлены, но к ним добавляются суффиксы _old или Old. Когда Финам отключит серверы со старыми библиотеками, они будут удалены из репозитория.

В папке **Examples** находится хорошо документированный код примеров. С них лучше начать разбираться с библиотекой.

- **Connect.py** - Подключение к Finam Trade API. Проверка работы запрос/ответ: Данные тикера. Проверка работы подписок: Подписка на стакан тикера.
- **Accounts.py** - Получение позиций, свободных средств, активных заявок (лимитные и стоп) для каждого счета.
- **Ticker.py** - Информация о различных тикерах.
- **Bars.py** - Получение дневных свечек с начала истории.
- **Stream.py** - Подписка на котировки, стакан, последние сделки.
- **Transactions.py** - Получение цены из последней котировки. Выставление рыночных заявок на покупку и продажу. Выставление и отмена лимитной заявки. Выставление и отмена стоп заявки.

Для старого API примеры находятся в папке **ExamplesOld**

- **Connect.py** - Подключение к Finam Trade API. Проверка работы запрос/ответ: Данные тикера. Проверка работы подписок: Подписка на стакан тикера. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/connect/)
- **Accounts.py** - Получение позиций, свободных средств, заявок и стоп заявок для каждого счета. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/accounts/)
- **Ticker.py** - Информация о различных тикерах. Валюта, лот, кол-во десятичных знаков. Вычисление шага цены из кол-ва десятичных знаков. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/ticker/)
- **Bars.py** - Загрузка свечек из файла, если есть. Получение истории свечек. Сохранение всех свечек в файл с фильтрами первого/последнего дня и дожи 4-х цен. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/bars/)
- **Stream.py** - Подписка на стакан. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/stream/)
- **Transactions.py** - Подписки на заявки, сделки, портфель. Получение последней цены сделки из дневных свечек. Выставление рыночных заявок на покупку и продажу. Выставление и отмена лимитной заявки. Выставление и отмена стоп заявки. [Видеоразбор >>>](https://finlab.vip/wpm/xpy/transactions/)

### Авторство, право использования, развитие
Автор библиотеки Чечет Игорь Александрович. Библиотека написана в рамках проекта [Финансовая Лаборатория](https://finlab.vip/).

Библиотека предоставляется бесплатно в исходном коде, с подробными комментариями и видеоразборами. При распространении ссылка на автора и проект обязательны.

Исправление ошибок, доработка и развитие библиотеки осуществляется автором и сообществом частных алготрейдеров проекта [Финансовая Лаборатория](https://finlab.vip/).

Вопросы по работоспособности старого Finam Trade API задавайте в [официальном VK чате Финама здесь >>>](https://vk.me/join/hJp7QRqRtxEPhIt5hmsSwcpgF/oLeIDZ3uU=)

Вопросы по новому Finam Trade API обсуждаются в [официальном Telegram-канале Финама здесь >>>](https://t.me/finam_trade_api)

### Что дальше
- Бесплатный курс "Автоторговля" по идеям, концепциям и процессам алгоритмической/автоматической торговли [смотрите здесь >>>](https://finlab.vip/wpm-category/autotrading2021/)


- Бесплатный курс "BackTrader: Быстрый старт" [ждет вас здесь >>>](https://finlab.vip/wpm-category/btquikstart/)


- [Подписывайтесь на Telegram канал "Финансовой Лаборатории",](https://t.me/finlabvip) чтобы быть в курсе всех новинок алгоритмической и автоматической торговли.
